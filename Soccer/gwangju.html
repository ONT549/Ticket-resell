<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê´‘ì£¼ FC í‹°ì¼“ ëª©ë¡</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <link rel="stylesheet" href="../style.css" />
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    h1 {
      color: #222;
    }
    .ticket {
      background: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div id="header-placeholder"></div>
  
  <div id="ticket-list">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

  <script>
    const SUPABASE_URL = 'https://dbdnvjbkotlyarsfmtjn.supabase.co'; // ğŸ” ì‹¤ì œ Supabase URLë¡œ êµì²´
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRiZG52amJrb3RseWFyc2ZtdGpuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NTUxNTUsImV4cCI6MjA2MjUzMTE1NX0.cQXd9NQQbEQ5tWAeQ2pJWIoGkQjAbVs4tOQAUeDCET0'; // ğŸ” ì‹¤ì œ Supabase KEYë¡œ êµì²´
    const TEAM_NAME = 'ê´‘ì£¼ FC';

    const { createClient } = supabase;
    const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

    async function fetchTickets() {
      const list = document.getElementById('ticket-list');
      list.innerHTML = 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';

      const { data, error } = await supabaseClient
        .from('tickets')
        .select('*')
        .eq('team', TEAM_NAME);

      if (error) {
        console.error('ì—ëŸ¬:', error.message);
        list.innerHTML = 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
        return;
      }

      if (!data || data.length === 0) {
        list.innerHTML = 'ë“±ë¡ëœ í‹°ì¼“ì´ ì—†ìŠµë‹ˆë‹¤.';
        return;
      }

      list.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

      data.forEach(ticket => {
        const div = document.createElement('div');
        div.className = 'ticket';
        div.innerHTML = `
          <strong>ê²½ê¸° ë‚ ì§œ:</strong> ${ticket.match_date} <br>
          <strong>ê²½ê¸° ì‹œê°„:</strong> ${ticket.match_time}<br>
          <strong>ê²½ê¸°ì¥:</strong> ${ticket.stadium}<br>
          <strong>ì¢Œì„ ë“±ê¸‰:</strong> ${ticket.seat_grade}<br>
          <strong>ì¢Œì„ ë²ˆí˜¸:</strong> ${ticket.seat_number}<br>
          <strong>í‹°ì¼“ ë‹¹ ê°€ê²©:</strong> ${ticket.price}ì›<br>
          <strong>íŒë§¤ ìˆ˜ëŸ‰:</strong> ${ticket.ticket_count}ì¥<br>
          <strong>ì—°ë½ì²˜:</strong> ${ticket.contact_method}<br>
          <strong>ì¶”ê°€ ì„¤ëª…:</strong> ${ticket.additional_info || 'ì—†ìŒ'}
        `;
        list.appendChild(div);
      });
    }

    fetchTickets();
    
       fetch("../Soccer-header.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("header-placeholder").innerHTML = data;
      });
  </script>
</body>
</html>
