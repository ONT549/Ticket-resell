<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë“±ë¡ëœ í‹°ì¼“ ë³´ê¸°</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: sans-serif; padding: 20px; }
    h1 { color: #333; }
    .ticket-card {
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
  <h1><a href="index.html" style="text-decoration: none; color: inherit;">ğŸŸï¸ Our Ticket</a></h1>
  <nav>
    <ul class="nav-links">
      <li><a href="submit.html">í‹°ì¼“ ë“±ë¡</a></li>
      <li><a href="tickets.html">ë“±ë¡ëœ í‹°ì¼“</a></li>
      <li><a href="about.html">ì†Œê°œ</a></li>
      <li class="dropdown">
        <span class="dropdown-toggle">ìŠ¤í¬ì¸ </span>
        <ul class="dropdown-menu">
          <li><strong>âš¾ ì•¼êµ¬</strong></li>
          <li><a href="baseball/doosan.html">ë‘ì‚° ë² ì–´ìŠ¤</a></li>
          <li><a href="baseball/lg.html">LG íŠ¸ìœˆìŠ¤</a></li>
          <li><a href="baseball/ktwiz.html">KT wiz</a></li>
          <li><a href="baseball/samsung.html">ì‚¼ì„± ë¼ì´ì˜¨ì¦ˆ</a></li>
          <li><a href="baseball/ssg.html">SSG ëœë”ìŠ¤</a></li>
          <li><a href="baseball/hanwha.html">í•œí™” ì´ê¸€ìŠ¤</a></li>
          <li><a href="baseball/nc.html">NC ë‹¤ì´ë…¸ìŠ¤</a></li>
          <li><a href="baseball/lotte.html">ë¡¯ë° ìì´ì–¸ì¸ </a></li>
          <li><a href="baseball/kiwoom.html">í‚¤ì›€ íˆì–´ë¡œì¦ˆ</a></li>
          <li><a href="baseball/kia.html">KIA íƒ€ì´ê±°ì¦ˆ</a></li>
          <li><strong>âš½ ì¶•êµ¬</strong></li>
          <li><a href="Soccer/fcseoul.html">FC ì„œìš¸</a></li>
          <li><a href="Soccer/suwonsamsung.html">ìˆ˜ì› ì‚¼ì„±</a></li>
          <li><a href="Soccer/ulsanhyundai.html">ìš¸ì‚° í˜„ëŒ€</a></li>
          <li><a href="Soccer/jeonbuk.html">ì „ë¶ í˜„ëŒ€</a></li>
          <li><a href="Soccer/pohang.html">í¬í•­ ìŠ¤í‹¸ëŸ¬ìŠ¤</a></li>
          <li><a href="Soccer/daegu.html">ëŒ€êµ¬ FC</a></li>
          <li><a href="Soccer/gwangju.html">ê´‘ì£¼ FC</a></li>
          <li><a href="Soccer/jeju.html">ì œì£¼ ìœ ë‚˜ì´í‹°ë“œ</a></li>
          <li><a href="Soccer/incheon.html">ì¸ì²œ ìœ ë‚˜ì´í‹°ë“œ</a></li>
          <li><a href="Soccer/gangwon.html">ê°•ì› FC</a></li>
        </ul>
      </li>
    </ul>
  </nav>
  <h1>ë“±ë¡ëœ í‹°ì¼“</h1>
  <div id="ticketList">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

    const SUPABASE_URL = 'https://dbdnvjbkotlyarsfmtjn.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRiZG52amJrb3RseWFyc2ZtdGpuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5NTUxNTUsImV4cCI6MjA2MjUzMTE1NX0.cQXd9NQQbEQ5tWAeQ2pJWIoGkQjAbVs4tOQAUeDCET0';

    const client = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    document.addEventListener('DOMContentLoaded', async () => {
      const ticketList = document.getElementById('ticketList');

      const { data: tickets, error } = await client
        .from('tickets')
        .select('*')

      if (error) {
        console.error('í‹°ì¼“ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:', error.message);
        ticketList.innerHTML = `<p>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>`;
        return;
      }

      if (!tickets || tickets.length === 0) {
        ticketList.innerHTML = `<p>ë“±ë¡ëœ í‹°ì¼“ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;
        return;
      }

      ticketList.innerHTML = ''; // ì´ˆê¸°í™”

      tickets.forEach(ticket => {
        const card = document.createElement('div');
        card.className = 'ticket-card';
        card.innerHTML = `
          <strong>ì¢…ëª©:</strong> ${ticket.sport_type}<br>
          <strong>íŒ€:</strong> ${ticket.team}<br>
          <strong>ê²½ê¸° ë‚ ì§œ:</strong> ${ticket.match_date}<br>
          <strong>ê²½ê¸° ì‹œê°„:</strong> ${ticket.match_time}<br>
          <strong>ê²½ê¸°ì¥:</strong> ${ticket.stadium}<br>
          <strong>ì¢Œì„ ë“±ê¸‰:</strong> ${ticket.seat_grade}<br>
          <strong>ì¢Œì„ ë²ˆí˜¸:</strong> ${ticket.seat_number}<br>
          <strong>í‹°ì¼“ ë‹¹ ê°€ê²©:</strong> ${ticket.price}ì›<br>
          <strong>ì—°ë½ì²˜:</strong> ${ticket.contact_method}<br>
          <strong>íŒë§¤ ìˆ˜ëŸ‰:</strong> ${ticket.ticket_count}ì¥<br>
          <strong>ì¶”ê°€ ì„¤ëª…:</strong> ${ticket.additional_info || 'ì—†ìŒ'}
        `;
        ticketList.appendChild(card);
      });
    });
  </script>
</body>
</html>
